# SolrShield setup

solr:
  shield:

    # Ideally all fields are listed under 'fields'.
    # 'unlisted_fields' controld handling of requests for unlisted fields
    unlisted_fields:
      allowed: true
      weight: 100

    # The fields section assign base weight to each field.
    # The scale goes from 1.0 to 1000, where
    # "An integer field" is 1
    # "A DocValued StrField, where the corpus holds a few thousand short unique values" is 5
    # "A DocValued StrField, where the values are mostly unique" is 10
    # "A TextField with a few words" is 50 (text fields are markedly heavier to process than StrFields)
    # "A TextField with a few hundred words" is 100
    # "A TextField with a full transcription of hours of speech" is 1000
    # "A TextField holding a full book of hundrede of pages" is 10000 (yes, it breaks the scale)
    fields:
      - name: id
        weight: 10
      - name: resource_id
        weight: 10
      - name: origin
        weight: 5

      - name: title
        weight: 50
      - name: abstract
        weight: 50

      - name: freetext 
        weight: 100
      - name: text
        weight: 1000
      - name: text_shingles
        weight: 1000

    # How to handle parameters not specified in SolrShield.
    # This is shared between all components
    unlisted_params:
      allowed: false
      weight: 1000 # Not used when allowed=false

    # The component section covers the major Solr handlers, such as faceting and highlighting.
    # It also covers grouping and faceting, which are technically not handlers but conceptually on par.
    components:

      # Search covers both the search and the retrieval part of a basic query based request
      search:
        default_enabled: true
        allowed: true
        # The base cost of using the component
        weight_constant: 100

        params:
          q:
          fl:
            default_enabled: true
            # weight_factor will be multiplied to each field weight
            weight_factor: 1
#            allowed_fields:
#              - id
#              - title
#            denied_fields:
#              - '*' # The asterisk is used for requesting all fields
#              - text
          # Explicit disabling of defType, overriding 
          defType:
            allowed: false


    # TODO: Remove this
    # collection, q, fq, rows, Integer start, String fl, String facet, List<String> facetField, String qOp, String wt, String version, String indent, String debug, String debugExplainStructured) {

      retrieval:
        default_enabled: true
        allowed: true

      facet:
        default_enabled: false
        allowed: true
        denied_fields:
          - text
          - text_shingles
